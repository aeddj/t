(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f1fef66"],{"1a8a":function(t,e,n){"use strict";n("b5e8")},"793e":function(t,e,n){"use strict";n("a8ff")},"9d8d":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-conent"},[n("van-nav-bar",{staticClass:"theme-colors",scopedSlots:t._u([{key:"left",fn:function(){return[t._t("left")]},proxy:!0},{key:"right",fn:function(){return[t._t("right")]},proxy:!0},{key:"title",fn:function(){return[t._t("title")]},proxy:!0}],null,!0)})],1)},r=[],a={name:"navbar",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},s=a,i=(n("1a8a"),n("2877")),u=Object(i["a"])(s,o,r,!1,null,null,null);e["a"]=u.exports},"9ed6":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-conent"},[n("navbar",[n("div",{attrs:{slot:"left"},on:{click:function(e){return t.$router.back()}},slot:"left"},[n("i",{staticClass:"icon icon-youjiantou title-font"})]),n("div",{attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title-font"},[t._v("登录")])])]),n("logininput")],1)},r=[],a=n("9d8d"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loginput"},[n("van-form",{ref:"forms",attrs:{"validate-first":"","show-error":!1,"show-error-message":!1},on:{submit:t.onLogin,failed:t.onFailed}},[n("van-field",{attrs:{type:"tel","icon-prefix":"icon","left-icon":"shouji",placeholder:"请输入手机号码",name:"mobile",rules:t.formRules.mobile},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}}),n("van-field",{attrs:{center:"",clearable:"","icon-prefix":"icon","left-icon":"yanzhengma",placeholder:"请输入短信验证码",rules:t.formRules.code},model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}},[n("div",{staticClass:"line",attrs:{slot:"extra"},slot:"extra"}),t.bool?n("p",{staticClass:"getcode",attrs:{slot:"extra",align:"center"},on:{click:function(e){return e.preventDefault(),t.onSendCode.apply(null,arguments)}},slot:"extra"},[t._v("获取验证码")]):n("p",{staticClass:"getcode",attrs:{slot:"extra",align:"center"},slot:"extra"},[t._v(t._s(t.times)+"s")])]),n("div",{staticClass:"navbar-button"},[n("van-button",{staticClass:"navbar-button",attrs:{type:"info","native-type":"submit",block:"",color:"#6db4fd"}},[t._v(" 登录/注册 ")])],1)],1)],1)},i=[],u=n("1da1"),c=(n("96cf"),n("c24f")),l={name:"logininput",components:{},props:{},data:function(){return{user:{mobile:"",code:""},color:"#6db4fd",formRules:{mobile:[{required:!0,message:"手机号码不能为空"},{pattern:/^1(3|4|5|7|8|9)\d{9}$/,trigger:"onBlur",message:"手机号码格式不正确"}],code:[{required:!0,message:"验证码不能为空"},{pattern:/^\d{6}$/,message:"验证码不符合规范"}]},bool:!0,times:60}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onLogin:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast.loading({message:"登录中...",forbidClick:!0,duration:0}),e.prev=1,e.next=4,Object(c["d"])(t.user);case 4:n=e.sent,t.$store.commit("removeCould","TabbarIndex"),t.$router.push(t.$route.query.r||"/"),t.$toast.success("登陆成功"),console.log(n),t.$store.commit("setToken",n.data.data),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),console.log(e.t0),t.$toast.fail("手机号或验证码错误");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},onFailed:function(t){this.$toast({message:t.errors[0].message,position:"top"})},onSendCode:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.forms.validate("mobile");case 3:return e.next=5,Object(c["e"])(t.user.mobile);case 5:t.bool=!t.bool,n=setInterval((function(){t.times=t.times-1,t.times<=1&&(clearInterval(n),t.times=60,t.bool=!t.bool)}),1e3),t.$toast({message:"验证码发送成功",position:"top"}),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),o=String,o=e.t0&&e.t0.response&&429===e.t0.response.status?"验证码发送频繁，请稍后重试":"mobile"===e.t0.name?e.t0.message:"发送失败",t.$toast({message:o,position:"top"});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},f=l,d=n("2877"),p=Object(d["a"])(f,s,i,!1,null,null,null),m=p.exports,b={name:"LoginIndex",components:{navbar:a["a"],logininput:m},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},v=b,h=(n("793e"),Object(d["a"])(v,o,r,!1,null,null,null));e["default"]=h.exports},a8ff:function(t,e,n){},b5e8:function(t,e,n){},c24f:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"i",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"f",(function(){return d}));var o=n("b775"),r=function(t){return Object(o["a"])({url:"/app/v1_0/authorizations",method:"POST",data:t})},a=function(t){return Object(o["a"])({url:"/app/v1_0/sms/codes/".concat(t),method:"GET"})},s=function(){return Object(o["a"])({url:"/app/v1_0/user",method:"GET"})},i=function(){return Object(o["a"])({url:"/app/v1_0/user/channels",method:"GET"})},u=function(t){return Object(o["a"])({url:"/app/v1_0/user/followings",method:"POST",data:{target:t}})},c=function(t){return Object(o["a"])({url:"/app/v1_0/user/followings/".concat(t),method:"DELETE"})},l=function(){return Object(o["a"])({url:"/app/v1_0/user/profile",method:"GET"})},f=function(t){return Object(o["a"])({url:"/app/v1_0/user/profile",method:"PATCH",data:t})},d=function(t){return Object(o["a"])({url:"/app/v1_0/user/photo",method:"PATCH",data:t})}}}]);
//# sourceMappingURL=chunk-3f1fef66.be26fe88.js.map