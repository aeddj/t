(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70954440"],{"25f0":function(t,e,n){"use strict";var a=n("6eeb"),i=n("825a"),s=n("d039"),r=n("ad6d"),c="toString",o=RegExp.prototype,u=o[c],l=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=u.name!=c;(l||h)&&a(RegExp.prototype,c,(function(){var t=i(this),e=String(t.source),n=t.flags,a=String(void 0===n&&t instanceof RegExp&&!("flags"in o)?r.call(t):n);return"/"+e+"/"+a}),{unsafe:!0})},"4d63":function(t,e,n){var a=n("83ab"),i=n("da84"),s=n("94ca"),r=n("7156"),c=n("9bf2").f,o=n("241c").f,u=n("44e7"),l=n("ad6d"),h=n("9f7f"),f=n("6eeb"),d=n("d039"),p=n("69f3").enforce,g=n("2626"),v=n("b622"),m=v("match"),b=i.RegExp,w=b.prototype,S=/a/g,x=/a/g,j=new b(S)!==S,k=h.UNSUPPORTED_Y,O=a&&s("RegExp",!j||k||d((function(){return x[m]=!1,b(S)!=S||b(x)==x||"/a/i"!=b(S,"i")})));if(O){var _=function(t,e){var n,a=this instanceof _,i=u(t),s=void 0===e;if(!a&&i&&t.constructor===_&&s)return t;j?i&&!s&&(t=t.source):t instanceof _&&(s&&(e=l.call(t)),t=t.source),k&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var c=r(j?new b(t,e):b(t,e),a?this:w,_);if(k&&n){var o=p(c);o.sticky=!0}return c},y=function(t){t in _||c(_,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},L=o(b),E=0;while(L.length>E)y(L[E++]);w.constructor=_,_.prototype=w,f(i,"RegExp",_)}g("RegExp")},"6e95":function(t,e,n){},"7a2b":function(t,e,n){},"8b2f":function(t,e,n){},"95da":function(t,e,n){"use strict";n("7a2b")},"9d3e":function(t,e,n){"use strict";n("8b2f")},c1dc:function(t,e,n){"use strict";n("6e95")},d2be:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("navbar",[n("form",{attrs:{slot:"left",action:"/"},slot:"left"},[n("van-search",{attrs:{placeholder:"请输入搜索关键词",background:"unset",autofocus:"true"},on:{search:t.onSearch,input:t.onShow,focus:function(e){t.sShow=!1}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("i",{staticClass:"icon icon-sousuo",attrs:{slot:"left-icon"},slot:"left-icon"})])],1),n("span",{staticClass:"searchBtn",attrs:{slot:"right"},on:{click:t.cloneM},slot:"right"},[t._v("取消")])]),t.sShow?n("sousuojieguo",{attrs:{searchData:t.value}}):t.value?n("lianxiangjianyi",{attrs:{"search-data":t.value},on:{getSearchItem:t.onSearch}}):n("lishijilu",{attrs:{"search-data":t.sList},on:{getSearchItem:t.onSearch,delAll:t.delAll,delOne:t.delOne}})],1)},i=[],s=n("2909"),r=n("1da1"),c=(n("96cf"),n("c975"),n("a434"),n("9d8d")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell-group",t._l(t.sList,(function(e,a){return n("van-cell",{key:a,attrs:{"icon-prefix":"icon",icon:"sousuo"},on:{click:function(n){return t.getItem(e)}}},[n("span",{attrs:{slot:"default"},domProps:{innerHTML:t._s(t.hightLight(e))},slot:"default"})])})),1)},u=[],l=(n("ac1f"),n("5319"),n("4d63"),n("25f0"),n("b775")),h=function(t){return Object(l["a"])({url:"/app/v1_0/suggestion",method:"GET",params:t})},f=function(){return Object(l["a"])({url:"/app/v1_0/search/histories",method:"GET"})},d=function(){return Object(l["a"])({url:"/app/v1_0/search/histories",method:"DELETE"})},p=function(t){return Object(l["a"])({url:"/app/v1_0/search",method:"GET",params:t})},g=n("2ef0"),v={name:"lianxiangjianyi",data:function(){return{sList:Array}},methods:{hightLight:function(t){return t.replace(new RegExp(this.searchData,"gi"),"<span style='color: #bf0917;'>".concat(this.searchData,"</span>"))},getItem:function(t){this.$emit("getSearchItem",t)}},props:{searchData:{type:String,required:!0}},watch:{searchData:{handler:Object(g["debounce"])(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h({q:e});case 2:a=t.sent,i=a.data,this.sList=i.data.options;case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),200),immediate:!0}}},m=v,b=n("2877"),w=Object(b["a"])(m,o,u,!1,null,"b04d7116",null),S=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell-group",[n("van-cell",{attrs:{title:"历史记录",icon:"sousuo"}},[0!==t.searchData.length?n("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[t.setShow?n("i",{staticClass:"icon icon-shanchu",on:{click:function(e){t.setShow=!1}}}):n("div",{staticClass:"delBtn"},[n("span",{staticClass:"orDel",on:{click:t.del}},[t._v("全部删除")]),n("span",{staticClass:"okDel",on:{click:function(e){t.setShow=!0}}},[t._v("完成")])])]):t._e()]),n("div",{staticClass:"lishijilu"},t._l(t.searchData,(function(e,a){return n("van-cell",{key:a,attrs:{title:e},on:{click:function(n){t.setShow&&t.searchS(e,a)}}},[t.setShow?t._e():n("van-icon",{attrs:{slot:"right-icon",name:"close"},on:{click:function(n){return t.searchS(e,a)}},slot:"right-icon"})],1)})),1)],1)},j=[],k=(n("4360"),{name:"lishijilu",data:function(){return{setShow:!0}},methods:{del:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$dialog.confirm({message:"确认清空全部历史记录吗",confirmButtonColor:"#3296fa"}).then((function(){t.setShow=!0,t.$emit("delAll",[])})).catch((function(){}));case 1:case"end":return e.stop()}}),e)})))()},searchS:function(t,e){if(this.setShow)return this.$emit("getSearchItem",t);this.$emit("delOne",e)}},created:function(){},props:{searchData:{type:Array,required:!0}}}),O=k,_=(n("9d3e"),Object(b["a"])(O,x,j,!1,null,"2a33c55a",null)),y=_.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{staticClass:"jieguo",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("van-cell",{key:a,attrs:{title:e.title},on:{click:function(n){return t.$router.push("/article/"+e.art_id)}}})})),1)],1)},E=[],R={name:"sousuojieguo",data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,page:1}},methods:{onLoad:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({page:t.page,pre_page:20,q:t.searchData});case 3:a=e.sent,i=a.data,r=i.data.results,(n=t.list).push.apply(n,Object(s["a"])(r)),t.loading=!1,r.length?t.page++:t.finished=!0,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()}},props:{searchData:{type:String,required:!0}},created:function(){}},D=R,$=(n("c1dc"),Object(b["a"])(D,L,E,!1,null,"c5e0fd3e",null)),C=$.exports,I=n("4ffc"),T={name:"search",components:{navbar:c["a"],lianxiangjianyi:S,lishijilu:y,sousuojieguo:C},data:function(){return{value:"",sShow:!1,sList:[]}},computed:{},watch:{sList:function(){Object(I["c"])(this.sList,"lishijilu")}},created:function(){this.getSearchData()},mounted:function(){},methods:{onSearch:function(t){if(this.sShow=!0,this.value=t,this.sList!==[]){var e=this.sList.indexOf(this.value);-1!==e&&this.sList.splice(e,1)}this.sList.unshift(this.value),this.sList.splice(20)},onShow:function(){this.value||(this.sShow=!1)},getSearchData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.token){e.next=8;break}return e.next=3,f();case 3:n=e.sent,a=n.data,t.sList=a.data.keywords,e.next=9;break;case 8:(i=t.sList).push.apply(i,Object(s["a"])(Object(I["b"])("lishijilu")?Object(I["b"])("lishijilu"):[]));case 9:case"end":return e.stop()}}),e)})))()},delAll:function(t){this.sList=t,this.$store.state.token&&(d(),this.getSearchData())},delOne:function(t){this.sList.splice(t,1)},cloneM:function(){this.$store.commit("removeCould","TabbarIndex"),this.$router.back()}},props:{}},A=T,q=(n("95da"),Object(b["a"])(A,a,i,!1,null,"b72c7dd2",null));e["default"]=q.exports}}]);
//# sourceMappingURL=chunk-70954440.e3af0348.js.map